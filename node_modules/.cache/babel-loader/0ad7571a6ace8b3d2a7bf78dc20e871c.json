{"ast":null,"code":"'use strict';\n\nconst Connection = require('../index.js').Connection;\n\nclass PoolConnection extends Connection {\n  constructor(pool, options) {\n    super(options);\n    this._pool = pool; // When a fatal error occurs the connection's protocol ends, which will cause\n    // the connection to end as well, thus we only need to watch for the end event\n    // and we will be notified of disconnects.\n    // REVIEW: Moved to `once`\n\n    this.once('end', () => {\n      this._removeFromPool();\n    });\n    this.once('error', () => {\n      this._removeFromPool();\n    });\n  }\n\n  release() {\n    if (!this._pool || this._pool._closed) {\n      return;\n    }\n\n    this._pool.releaseConnection(this);\n  }\n\n  promise(promiseImpl) {\n    const PromisePoolConnection = require('../promise').PromisePoolConnection;\n\n    return new PromisePoolConnection(this, promiseImpl);\n  }\n\n  end() {\n    const err = new Error('Calling conn.end() to release a pooled connection is ' + 'deprecated. In next version calling conn.end() will be ' + 'restored to default conn.end() behavior. Use ' + 'conn.release() instead.');\n    this.emit('warn', err); // eslint-disable-next-line no-console\n\n    console.warn(err.message);\n    this.release();\n  }\n\n  destroy() {\n    this._removeFromPool();\n\n    super.destroy();\n  }\n\n  _removeFromPool() {\n    if (!this._pool || this._pool._closed) {\n      return;\n    }\n\n    const pool = this._pool;\n    this._pool = null;\n\n    pool._removeConnection(this);\n  }\n\n}\n\nPoolConnection.statementKey = Connection.statementKey;\nmodule.exports = PoolConnection; // TODO: Remove this when we are removing PoolConnection#end\n\nPoolConnection.prototype._realEnd = Connection.prototype.end;","map":{"version":3,"names":["Connection","require","PoolConnection","constructor","pool","options","_pool","once","_removeFromPool","release","_closed","releaseConnection","promise","promiseImpl","PromisePoolConnection","end","err","Error","emit","console","warn","message","destroy","_removeConnection","statementKey","module","exports","prototype","_realEnd"],"sources":["/home/emilio/Ãrea de Trabalho/OneBitCode-aulas/REACT/site-react-login-live/react-controlledForms/node_modules/mysql2/lib/pool_connection.js"],"sourcesContent":["'use strict';\n\nconst Connection = require('../index.js').Connection;\n\nclass PoolConnection extends Connection {\n  constructor(pool, options) {\n    super(options);\n    this._pool = pool;\n    // When a fatal error occurs the connection's protocol ends, which will cause\n    // the connection to end as well, thus we only need to watch for the end event\n    // and we will be notified of disconnects.\n    // REVIEW: Moved to `once`\n    this.once('end', () => {\n      this._removeFromPool();\n    });\n    this.once('error', () => {\n      this._removeFromPool();\n    });\n  }\n\n  release() {\n    if (!this._pool || this._pool._closed) {\n      return;\n    }\n    this._pool.releaseConnection(this);\n  }\n\n  promise(promiseImpl) {\n    const PromisePoolConnection = require('../promise').PromisePoolConnection;\n    return new PromisePoolConnection(this, promiseImpl);\n  }\n\n  end() {\n    const err = new Error(\n      'Calling conn.end() to release a pooled connection is ' +\n        'deprecated. In next version calling conn.end() will be ' +\n        'restored to default conn.end() behavior. Use ' +\n        'conn.release() instead.'\n    );\n    this.emit('warn', err);\n    // eslint-disable-next-line no-console\n    console.warn(err.message);\n    this.release();\n  }\n\n  destroy() {\n    this._removeFromPool();\n    super.destroy();\n  }\n\n  _removeFromPool() {\n    if (!this._pool || this._pool._closed) {\n      return;\n    }\n    const pool = this._pool;\n    this._pool = null;\n    pool._removeConnection(this);\n  }\n}\n\nPoolConnection.statementKey = Connection.statementKey;\nmodule.exports = PoolConnection;\n\n// TODO: Remove this when we are removing PoolConnection#end\nPoolConnection.prototype._realEnd = Connection.prototype.end;\n"],"mappings":"AAAA;;AAEA,MAAMA,UAAU,GAAGC,OAAO,CAAC,aAAD,CAAP,CAAuBD,UAA1C;;AAEA,MAAME,cAAN,SAA6BF,UAA7B,CAAwC;EACtCG,WAAW,CAACC,IAAD,EAAOC,OAAP,EAAgB;IACzB,MAAMA,OAAN;IACA,KAAKC,KAAL,GAAaF,IAAb,CAFyB,CAGzB;IACA;IACA;IACA;;IACA,KAAKG,IAAL,CAAU,KAAV,EAAiB,MAAM;MACrB,KAAKC,eAAL;IACD,CAFD;IAGA,KAAKD,IAAL,CAAU,OAAV,EAAmB,MAAM;MACvB,KAAKC,eAAL;IACD,CAFD;EAGD;;EAEDC,OAAO,GAAG;IACR,IAAI,CAAC,KAAKH,KAAN,IAAe,KAAKA,KAAL,CAAWI,OAA9B,EAAuC;MACrC;IACD;;IACD,KAAKJ,KAAL,CAAWK,iBAAX,CAA6B,IAA7B;EACD;;EAEDC,OAAO,CAACC,WAAD,EAAc;IACnB,MAAMC,qBAAqB,GAAGb,OAAO,CAAC,YAAD,CAAP,CAAsBa,qBAApD;;IACA,OAAO,IAAIA,qBAAJ,CAA0B,IAA1B,EAAgCD,WAAhC,CAAP;EACD;;EAEDE,GAAG,GAAG;IACJ,MAAMC,GAAG,GAAG,IAAIC,KAAJ,CACV,0DACE,yDADF,GAEE,+CAFF,GAGE,yBAJQ,CAAZ;IAMA,KAAKC,IAAL,CAAU,MAAV,EAAkBF,GAAlB,EAPI,CAQJ;;IACAG,OAAO,CAACC,IAAR,CAAaJ,GAAG,CAACK,OAAjB;IACA,KAAKZ,OAAL;EACD;;EAEDa,OAAO,GAAG;IACR,KAAKd,eAAL;;IACA,MAAMc,OAAN;EACD;;EAEDd,eAAe,GAAG;IAChB,IAAI,CAAC,KAAKF,KAAN,IAAe,KAAKA,KAAL,CAAWI,OAA9B,EAAuC;MACrC;IACD;;IACD,MAAMN,IAAI,GAAG,KAAKE,KAAlB;IACA,KAAKA,KAAL,GAAa,IAAb;;IACAF,IAAI,CAACmB,iBAAL,CAAuB,IAAvB;EACD;;AArDqC;;AAwDxCrB,cAAc,CAACsB,YAAf,GAA8BxB,UAAU,CAACwB,YAAzC;AACAC,MAAM,CAACC,OAAP,GAAiBxB,cAAjB,C,CAEA;;AACAA,cAAc,CAACyB,SAAf,CAAyBC,QAAzB,GAAoC5B,UAAU,CAAC2B,SAAX,CAAqBZ,GAAzD"},"metadata":{},"sourceType":"script"}