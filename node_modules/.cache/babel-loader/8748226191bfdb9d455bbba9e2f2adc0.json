{"ast":null,"code":"'use strict';\n\nconst core = require('./index.js');\n\nconst EventEmitter = require('events').EventEmitter;\n\nfunction makeDoneCb(resolve, reject, localErr) {\n  return function (err, rows, fields) {\n    if (err) {\n      localErr.message = err.message;\n      localErr.code = err.code;\n      localErr.errno = err.errno;\n      localErr.sql = err.sql;\n      localErr.sqlState = err.sqlState;\n      localErr.sqlMessage = err.sqlMessage;\n      reject(localErr);\n    } else {\n      resolve([rows, fields]);\n    }\n  };\n}\n\nfunction inheritEvents(source, target, events) {\n  const listeners = {};\n  target.on('newListener', eventName => {\n    if (events.indexOf(eventName) >= 0 && !target.listenerCount(eventName)) {\n      source.on(eventName, listeners[eventName] = function () {\n        const args = [].slice.call(arguments);\n        args.unshift(eventName);\n        target.emit.apply(target, args);\n      });\n    }\n  }).on('removeListener', eventName => {\n    if (events.indexOf(eventName) >= 0 && !target.listenerCount(eventName)) {\n      source.removeListener(eventName, listeners[eventName]);\n      delete listeners[eventName];\n    }\n  });\n}\n\nclass PromisePreparedStatementInfo {\n  constructor(statement, promiseImpl) {\n    this.statement = statement;\n    this.Promise = promiseImpl;\n  }\n\n  execute(parameters) {\n    const s = this.statement;\n    const localErr = new Error();\n    return new this.Promise((resolve, reject) => {\n      const done = makeDoneCb(resolve, reject, localErr);\n\n      if (parameters) {\n        s.execute(parameters, done);\n      } else {\n        s.execute(done);\n      }\n    });\n  }\n\n  close() {\n    return new this.Promise(resolve => {\n      this.statement.close();\n      resolve();\n    });\n  }\n\n}\n\nclass PromiseConnection extends EventEmitter {\n  constructor(connection, promiseImpl) {\n    super();\n    this.connection = connection;\n    this.Promise = promiseImpl || Promise;\n    inheritEvents(connection, this, ['error', 'drain', 'connect', 'end', 'enqueue']);\n  }\n\n  release() {\n    this.connection.release();\n  }\n\n  query(query, params) {\n    const c = this.connection;\n    const localErr = new Error();\n\n    if (typeof params === 'function') {\n      throw new Error('Callback function is not available with promise clients.');\n    }\n\n    return new this.Promise((resolve, reject) => {\n      const done = makeDoneCb(resolve, reject, localErr);\n\n      if (params !== undefined) {\n        c.query(query, params, done);\n      } else {\n        c.query(query, done);\n      }\n    });\n  }\n\n  execute(query, params) {\n    const c = this.connection;\n    const localErr = new Error();\n\n    if (typeof params === 'function') {\n      throw new Error('Callback function is not available with promise clients.');\n    }\n\n    return new this.Promise((resolve, reject) => {\n      const done = makeDoneCb(resolve, reject, localErr);\n\n      if (params !== undefined) {\n        c.execute(query, params, done);\n      } else {\n        c.execute(query, done);\n      }\n    });\n  }\n\n  end() {\n    return new this.Promise(resolve => {\n      this.connection.end(resolve);\n    });\n  }\n\n  beginTransaction() {\n    const c = this.connection;\n    const localErr = new Error();\n    return new this.Promise((resolve, reject) => {\n      const done = makeDoneCb(resolve, reject, localErr);\n      c.beginTransaction(done);\n    });\n  }\n\n  commit() {\n    const c = this.connection;\n    const localErr = new Error();\n    return new this.Promise((resolve, reject) => {\n      const done = makeDoneCb(resolve, reject, localErr);\n      c.commit(done);\n    });\n  }\n\n  rollback() {\n    const c = this.connection;\n    const localErr = new Error();\n    return new this.Promise((resolve, reject) => {\n      const done = makeDoneCb(resolve, reject, localErr);\n      c.rollback(done);\n    });\n  }\n\n  ping() {\n    const c = this.connection;\n    const localErr = new Error();\n    return new this.Promise((resolve, reject) => {\n      const done = makeDoneCb(resolve, reject, localErr);\n      c.ping(done);\n    });\n  }\n\n  connect() {\n    const c = this.connection;\n    const localErr = new Error();\n    return new this.Promise((resolve, reject) => {\n      c.connect((err, param) => {\n        if (err) {\n          localErr.message = err.message;\n          localErr.code = err.code;\n          localErr.errno = err.errno;\n          localErr.sqlState = err.sqlState;\n          localErr.sqlMessage = err.sqlMessage;\n          reject(localErr);\n        } else {\n          resolve(param);\n        }\n      });\n    });\n  }\n\n  prepare(options) {\n    const c = this.connection;\n    const promiseImpl = this.Promise;\n    const localErr = new Error();\n    return new this.Promise((resolve, reject) => {\n      c.prepare(options, (err, statement) => {\n        if (err) {\n          localErr.message = err.message;\n          localErr.code = err.code;\n          localErr.errno = err.errno;\n          localErr.sqlState = err.sqlState;\n          localErr.sqlMessage = err.sqlMessage;\n          reject(localErr);\n        } else {\n          const wrappedStatement = new PromisePreparedStatementInfo(statement, promiseImpl);\n          resolve(wrappedStatement);\n        }\n      });\n    });\n  }\n\n  changeUser(options) {\n    const c = this.connection;\n    const localErr = new Error();\n    return new this.Promise((resolve, reject) => {\n      c.changeUser(options, err => {\n        if (err) {\n          localErr.message = err.message;\n          localErr.code = err.code;\n          localErr.errno = err.errno;\n          localErr.sqlState = err.sqlState;\n          localErr.sqlMessage = err.sqlMessage;\n          reject(localErr);\n        } else {\n          resolve();\n        }\n      });\n    });\n  }\n\n  get config() {\n    return this.connection.config;\n  }\n\n  get threadId() {\n    return this.connection.threadId;\n  }\n\n}\n\nfunction createConnection(opts) {\n  const coreConnection = core.createConnection(opts);\n  const createConnectionErr = new Error();\n  const thePromise = opts.Promise || Promise;\n\n  if (!thePromise) {\n    throw new Error('no Promise implementation available.' + 'Use promise-enabled node version or pass userland Promise' + \" implementation as parameter, for example: { Promise: require('bluebird') }\");\n  }\n\n  return new thePromise((resolve, reject) => {\n    coreConnection.once('connect', () => {\n      resolve(new PromiseConnection(coreConnection, thePromise));\n    });\n    coreConnection.once('error', err => {\n      createConnectionErr.message = err.message;\n      createConnectionErr.code = err.code;\n      createConnectionErr.errno = err.errno;\n      createConnectionErr.sqlState = err.sqlState;\n      reject(createConnectionErr);\n    });\n  });\n} // note: the callback of \"changeUser\" is not called on success\n// hence there is no possibility to call \"resolve\"\n// patching PromiseConnection\n// create facade functions for prototype functions on \"Connection\" that are not yet\n// implemented with PromiseConnection\n// proxy synchronous functions only\n\n\n(function (functionsToWrap) {\n  for (let i = 0; functionsToWrap && i < functionsToWrap.length; i++) {\n    const func = functionsToWrap[i];\n\n    if (typeof core.Connection.prototype[func] === 'function' && PromiseConnection.prototype[func] === undefined) {\n      PromiseConnection.prototype[func] = function factory(funcName) {\n        return function () {\n          return core.Connection.prototype[funcName].apply(this.connection, arguments);\n        };\n      }(func);\n    }\n  }\n})([// synchronous functions\n'close', 'createBinlogStream', 'destroy', 'escape', 'escapeId', 'format', 'pause', 'pipe', 'resume', 'unprepare']);\n\nclass PromisePoolConnection extends PromiseConnection {\n  constructor(connection, promiseImpl) {\n    super(connection, promiseImpl);\n  }\n\n  destroy() {\n    return core.PoolConnection.prototype.destroy.apply(this.connection, arguments);\n  }\n\n}\n\nclass PromisePool extends EventEmitter {\n  constructor(pool, thePromise) {\n    super();\n    this.pool = pool;\n    this.Promise = thePromise || Promise;\n    inheritEvents(pool, this, ['acquire', 'connection', 'enqueue', 'release']);\n  }\n\n  getConnection() {\n    const corePool = this.pool;\n    return new this.Promise((resolve, reject) => {\n      corePool.getConnection((err, coreConnection) => {\n        if (err) {\n          reject(err);\n        } else {\n          resolve(new PromisePoolConnection(coreConnection, this.Promise));\n        }\n      });\n    });\n  }\n\n  query(sql, args) {\n    const corePool = this.pool;\n    const localErr = new Error();\n\n    if (typeof args === 'function') {\n      throw new Error('Callback function is not available with promise clients.');\n    }\n\n    return new this.Promise((resolve, reject) => {\n      const done = makeDoneCb(resolve, reject, localErr);\n\n      if (args !== undefined) {\n        corePool.query(sql, args, done);\n      } else {\n        corePool.query(sql, done);\n      }\n    });\n  }\n\n  execute(sql, args) {\n    const corePool = this.pool;\n    const localErr = new Error();\n\n    if (typeof args === 'function') {\n      throw new Error('Callback function is not available with promise clients.');\n    }\n\n    return new this.Promise((resolve, reject) => {\n      const done = makeDoneCb(resolve, reject, localErr);\n\n      if (args) {\n        corePool.execute(sql, args, done);\n      } else {\n        corePool.execute(sql, done);\n      }\n    });\n  }\n\n  end() {\n    const corePool = this.pool;\n    const localErr = new Error();\n    return new this.Promise((resolve, reject) => {\n      corePool.end(err => {\n        if (err) {\n          localErr.message = err.message;\n          localErr.code = err.code;\n          localErr.errno = err.errno;\n          localErr.sqlState = err.sqlState;\n          localErr.sqlMessage = err.sqlMessage;\n          reject(localErr);\n        } else {\n          resolve();\n        }\n      });\n    });\n  }\n\n}\n\nfunction createPool(opts) {\n  const corePool = core.createPool(opts);\n  const thePromise = opts.Promise || Promise;\n\n  if (!thePromise) {\n    throw new Error('no Promise implementation available.' + 'Use promise-enabled node version or pass userland Promise' + \" implementation as parameter, for example: { Promise: require('bluebird') }\");\n  }\n\n  return new PromisePool(corePool, thePromise);\n}\n\n(function (functionsToWrap) {\n  for (let i = 0; functionsToWrap && i < functionsToWrap.length; i++) {\n    const func = functionsToWrap[i];\n\n    if (typeof core.Pool.prototype[func] === 'function' && PromisePool.prototype[func] === undefined) {\n      PromisePool.prototype[func] = function factory(funcName) {\n        return function () {\n          return core.Pool.prototype[funcName].apply(this.pool, arguments);\n        };\n      }(func);\n    }\n  }\n})([// synchronous functions\n'escape', 'escapeId', 'format']);\n\nclass PromisePoolCluster extends EventEmitter {\n  constructor(poolCluster, thePromise) {\n    super();\n    this.poolCluster = poolCluster;\n    this.Promise = thePromise || Promise;\n    inheritEvents(poolCluster, this, ['acquire', 'connection', 'enqueue', 'release']);\n  }\n\n  getConnection() {\n    const corePoolCluster = this.poolCluster;\n    return new this.Promise((resolve, reject) => {\n      corePoolCluster.getConnection((err, coreConnection) => {\n        if (err) {\n          reject(err);\n        } else {\n          resolve(new PromisePoolConnection(coreConnection, this.Promise));\n        }\n      });\n    });\n  }\n\n  query(sql, args) {\n    const corePoolCluster = this.poolCluster;\n    const localErr = new Error();\n\n    if (typeof args === 'function') {\n      throw new Error('Callback function is not available with promise clients.');\n    }\n\n    return new this.Promise((resolve, reject) => {\n      const done = makeDoneCb(resolve, reject, localErr);\n      corePoolCluster.query(sql, args, done);\n    });\n  }\n\n  execute(sql, args) {\n    const corePoolCluster = this.poolCluster;\n    const localErr = new Error();\n\n    if (typeof args === 'function') {\n      throw new Error('Callback function is not available with promise clients.');\n    }\n\n    return new this.Promise((resolve, reject) => {\n      const done = makeDoneCb(resolve, reject, localErr);\n      corePoolCluster.execute(sql, args, done);\n    });\n  }\n\n  of(pattern, selector) {\n    return new PromisePoolCluster(this.poolCluster.of(pattern, selector), this.Promise);\n  }\n\n  end() {\n    const corePoolCluster = this.poolCluster;\n    const localErr = new Error();\n    return new this.Promise((resolve, reject) => {\n      corePoolCluster.end(err => {\n        if (err) {\n          localErr.message = err.message;\n          localErr.code = err.code;\n          localErr.errno = err.errno;\n          localErr.sqlState = err.sqlState;\n          localErr.sqlMessage = err.sqlMessage;\n          reject(localErr);\n        } else {\n          resolve();\n        }\n      });\n    });\n  }\n\n}\n/**\n * proxy poolCluster synchronous functions\n */\n\n\n(function (functionsToWrap) {\n  for (let i = 0; functionsToWrap && i < functionsToWrap.length; i++) {\n    const func = functionsToWrap[i];\n\n    if (typeof core.PoolCluster.prototype[func] === 'function' && PromisePoolCluster.prototype[func] === undefined) {\n      PromisePoolCluster.prototype[func] = function factory(funcName) {\n        return function () {\n          return core.PoolCluster.prototype[funcName].apply(this.poolCluster, arguments);\n        };\n      }(func);\n    }\n  }\n})(['add']);\n\nfunction createPoolCluster(opts) {\n  const corePoolCluster = core.createPoolCluster(opts);\n  const thePromise = opts && opts.Promise || Promise;\n\n  if (!thePromise) {\n    throw new Error('no Promise implementation available.' + 'Use promise-enabled node version or pass userland Promise' + \" implementation as parameter, for example: { Promise: require('bluebird') }\");\n  }\n\n  return new PromisePoolCluster(corePoolCluster, thePromise);\n}\n\nexports.createConnection = createConnection;\nexports.createPool = createPool;\nexports.createPoolCluster = createPoolCluster;\nexports.escape = core.escape;\nexports.escapeId = core.escapeId;\nexports.format = core.format;\nexports.raw = core.raw;\nexports.PromisePool = PromisePool;\nexports.PromiseConnection = PromiseConnection;\nexports.PromisePoolConnection = PromisePoolConnection;","map":{"version":3,"names":["core","require","EventEmitter","makeDoneCb","resolve","reject","localErr","err","rows","fields","message","code","errno","sql","sqlState","sqlMessage","inheritEvents","source","target","events","listeners","on","eventName","indexOf","listenerCount","args","slice","call","arguments","unshift","emit","apply","removeListener","PromisePreparedStatementInfo","constructor","statement","promiseImpl","Promise","execute","parameters","s","Error","done","close","PromiseConnection","connection","release","query","params","c","undefined","end","beginTransaction","commit","rollback","ping","connect","param","prepare","options","wrappedStatement","changeUser","config","threadId","createConnection","opts","coreConnection","createConnectionErr","thePromise","once","functionsToWrap","i","length","func","Connection","prototype","factory","funcName","PromisePoolConnection","destroy","PoolConnection","PromisePool","pool","getConnection","corePool","createPool","Pool","PromisePoolCluster","poolCluster","corePoolCluster","of","pattern","selector","PoolCluster","createPoolCluster","exports","escape","escapeId","format","raw"],"sources":["/home/emilio/Área de Trabalho/OneBitCode-aulas/REACT/site-react-login-live/react-controlledForms/node_modules/mysql2/promise.js"],"sourcesContent":["'use strict';\n\nconst core = require('./index.js');\nconst EventEmitter = require('events').EventEmitter;\n\nfunction makeDoneCb(resolve, reject, localErr) {\n  return function (err, rows, fields) {\n    if (err) {\n      localErr.message = err.message;\n      localErr.code = err.code;\n      localErr.errno = err.errno;\n      localErr.sql = err.sql;\n      localErr.sqlState = err.sqlState;\n      localErr.sqlMessage = err.sqlMessage;\n      reject(localErr);\n    } else {\n      resolve([rows, fields]);\n    }\n  };\n}\n\nfunction inheritEvents(source, target, events) {\n  const listeners = {};\n  target\n    .on('newListener', eventName => {\n      if (events.indexOf(eventName) >= 0 && !target.listenerCount(eventName)) {\n        source.on(\n          eventName,\n          (listeners[eventName] = function () {\n            const args = [].slice.call(arguments);\n            args.unshift(eventName);\n\n            target.emit.apply(target, args);\n          })\n        );\n      }\n    })\n    .on('removeListener', eventName => {\n      if (events.indexOf(eventName) >= 0 && !target.listenerCount(eventName)) {\n        source.removeListener(eventName, listeners[eventName]);\n        delete listeners[eventName];\n      }\n    });\n}\n\nclass PromisePreparedStatementInfo {\n  constructor(statement, promiseImpl) {\n    this.statement = statement;\n    this.Promise = promiseImpl;\n  }\n\n  execute(parameters) {\n    const s = this.statement;\n    const localErr = new Error();\n    return new this.Promise((resolve, reject) => {\n      const done = makeDoneCb(resolve, reject, localErr);\n      if (parameters) {\n        s.execute(parameters, done);\n      } else {\n        s.execute(done);\n      }\n    });\n  }\n\n  close() {\n    return new this.Promise(resolve => {\n      this.statement.close();\n      resolve();\n    });\n  }\n}\n\nclass PromiseConnection extends EventEmitter {\n  constructor(connection, promiseImpl) {\n    super();\n    this.connection = connection;\n    this.Promise = promiseImpl || Promise;\n    inheritEvents(connection, this, [\n      'error',\n      'drain',\n      'connect',\n      'end',\n      'enqueue'\n    ]);\n  }\n\n  release() {\n    this.connection.release();\n  }\n\n  query(query, params) {\n    const c = this.connection;\n    const localErr = new Error();\n    if (typeof params === 'function') {\n      throw new Error(\n        'Callback function is not available with promise clients.'\n      );\n    }\n    return new this.Promise((resolve, reject) => {\n      const done = makeDoneCb(resolve, reject, localErr);\n      if (params !== undefined) {\n        c.query(query, params, done);\n      } else {\n        c.query(query, done);\n      }\n    });\n  }\n\n  execute(query, params) {\n    const c = this.connection;\n    const localErr = new Error();\n    if (typeof params === 'function') {\n      throw new Error(\n        'Callback function is not available with promise clients.'\n      );\n    }\n    return new this.Promise((resolve, reject) => {\n      const done = makeDoneCb(resolve, reject, localErr);\n      if (params !== undefined) {\n        c.execute(query, params, done);\n      } else {\n        c.execute(query, done);\n      }\n    });\n  }\n\n  end() {\n    return new this.Promise(resolve => {\n      this.connection.end(resolve);\n    });\n  }\n\n  beginTransaction() {\n    const c = this.connection;\n    const localErr = new Error();\n    return new this.Promise((resolve, reject) => {\n      const done = makeDoneCb(resolve, reject, localErr);\n      c.beginTransaction(done);\n    });\n  }\n\n  commit() {\n    const c = this.connection;\n    const localErr = new Error();\n    return new this.Promise((resolve, reject) => {\n      const done = makeDoneCb(resolve, reject, localErr);\n      c.commit(done);\n    });\n  }\n\n  rollback() {\n    const c = this.connection;\n    const localErr = new Error();\n    return new this.Promise((resolve, reject) => {\n      const done = makeDoneCb(resolve, reject, localErr);\n      c.rollback(done);\n    });\n  }\n\n  ping() {\n    const c = this.connection;\n    const localErr = new Error();\n    return new this.Promise((resolve, reject) => {\n      const done = makeDoneCb(resolve, reject, localErr);\n      c.ping(done);\n    });\n  }\n\n  connect() {\n    const c = this.connection;\n    const localErr = new Error();\n    return new this.Promise((resolve, reject) => {\n      c.connect((err, param) => {\n        if (err) {\n          localErr.message = err.message;\n          localErr.code = err.code;\n          localErr.errno = err.errno;\n          localErr.sqlState = err.sqlState;\n          localErr.sqlMessage = err.sqlMessage;\n          reject(localErr);\n        } else {\n          resolve(param);\n        }\n      });\n    });\n  }\n\n  prepare(options) {\n    const c = this.connection;\n    const promiseImpl = this.Promise;\n    const localErr = new Error();\n    return new this.Promise((resolve, reject) => {\n      c.prepare(options, (err, statement) => {\n        if (err) {\n          localErr.message = err.message;\n          localErr.code = err.code;\n          localErr.errno = err.errno;\n          localErr.sqlState = err.sqlState;\n          localErr.sqlMessage = err.sqlMessage;\n          reject(localErr);\n        } else {\n          const wrappedStatement = new PromisePreparedStatementInfo(\n            statement,\n            promiseImpl\n          );\n          resolve(wrappedStatement);\n        }\n      });\n    });\n  }\n\n  changeUser(options) {\n    const c = this.connection;\n    const localErr = new Error();\n    return new this.Promise((resolve, reject) => {\n      c.changeUser(options, err => {\n        if (err) {\n          localErr.message = err.message;\n          localErr.code = err.code;\n          localErr.errno = err.errno;\n          localErr.sqlState = err.sqlState;\n          localErr.sqlMessage = err.sqlMessage;\n          reject(localErr);\n        } else {\n          resolve();\n        }\n      });\n    });\n  }\n\n  get config() {\n    return this.connection.config;\n  }\n\n  get threadId() {\n    return this.connection.threadId;\n  }\n}\n\nfunction createConnection(opts) {\n  const coreConnection = core.createConnection(opts);\n  const createConnectionErr = new Error();\n  const thePromise = opts.Promise || Promise;\n  if (!thePromise) {\n    throw new Error(\n      'no Promise implementation available.' +\n      'Use promise-enabled node version or pass userland Promise' +\n      \" implementation as parameter, for example: { Promise: require('bluebird') }\"\n    );\n  }\n  return new thePromise((resolve, reject) => {\n    coreConnection.once('connect', () => {\n      resolve(new PromiseConnection(coreConnection, thePromise));\n    });\n    coreConnection.once('error', err => {\n      createConnectionErr.message = err.message;\n      createConnectionErr.code = err.code;\n      createConnectionErr.errno = err.errno;\n      createConnectionErr.sqlState = err.sqlState;\n      reject(createConnectionErr);\n    });\n  });\n}\n\n// note: the callback of \"changeUser\" is not called on success\n// hence there is no possibility to call \"resolve\"\n\n// patching PromiseConnection\n// create facade functions for prototype functions on \"Connection\" that are not yet\n// implemented with PromiseConnection\n\n// proxy synchronous functions only\n(function (functionsToWrap) {\n  for (let i = 0; functionsToWrap && i < functionsToWrap.length; i++) {\n    const func = functionsToWrap[i];\n\n    if (\n      typeof core.Connection.prototype[func] === 'function' &&\n      PromiseConnection.prototype[func] === undefined\n    ) {\n      PromiseConnection.prototype[func] = (function factory(funcName) {\n        return function () {\n          return core.Connection.prototype[funcName].apply(\n            this.connection,\n            arguments\n          );\n        };\n      })(func);\n    }\n  }\n})([\n  // synchronous functions\n  'close',\n  'createBinlogStream',\n  'destroy',\n  'escape',\n  'escapeId',\n  'format',\n  'pause',\n  'pipe',\n  'resume',\n  'unprepare'\n]);\n\nclass PromisePoolConnection extends PromiseConnection {\n  constructor(connection, promiseImpl) {\n    super(connection, promiseImpl);\n  }\n\n  destroy() {\n    return core.PoolConnection.prototype.destroy.apply(\n      this.connection,\n      arguments\n    );\n  }\n}\n\nclass PromisePool extends EventEmitter {\n  constructor(pool, thePromise) {\n    super();\n    this.pool = pool;\n    this.Promise = thePromise || Promise;\n    inheritEvents(pool, this, ['acquire', 'connection', 'enqueue', 'release']);\n  }\n\n  getConnection() {\n    const corePool = this.pool;\n    return new this.Promise((resolve, reject) => {\n      corePool.getConnection((err, coreConnection) => {\n        if (err) {\n          reject(err);\n        } else {\n          resolve(new PromisePoolConnection(coreConnection, this.Promise));\n        }\n      });\n    });\n  }\n\n  query(sql, args) {\n    const corePool = this.pool;\n    const localErr = new Error();\n    if (typeof args === 'function') {\n      throw new Error(\n        'Callback function is not available with promise clients.'\n      );\n    }\n    return new this.Promise((resolve, reject) => {\n      const done = makeDoneCb(resolve, reject, localErr);\n      if (args !== undefined) {\n        corePool.query(sql, args, done);\n      } else {\n        corePool.query(sql, done);\n      }\n    });\n  }\n\n  execute(sql, args) {\n    const corePool = this.pool;\n    const localErr = new Error();\n    if (typeof args === 'function') {\n      throw new Error(\n        'Callback function is not available with promise clients.'\n      );\n    }\n    return new this.Promise((resolve, reject) => {\n      const done = makeDoneCb(resolve, reject, localErr);\n      if (args) {\n        corePool.execute(sql, args, done);\n      } else {\n        corePool.execute(sql, done);\n      }\n    });\n  }\n\n  end() {\n    const corePool = this.pool;\n    const localErr = new Error();\n    return new this.Promise((resolve, reject) => {\n      corePool.end(err => {\n        if (err) {\n          localErr.message = err.message;\n          localErr.code = err.code;\n          localErr.errno = err.errno;\n          localErr.sqlState = err.sqlState;\n          localErr.sqlMessage = err.sqlMessage;\n          reject(localErr);\n        } else {\n          resolve();\n        }\n      });\n    });\n  }\n}\n\nfunction createPool(opts) {\n  const corePool = core.createPool(opts);\n  const thePromise = opts.Promise || Promise;\n  if (!thePromise) {\n    throw new Error(\n      'no Promise implementation available.' +\n      'Use promise-enabled node version or pass userland Promise' +\n      \" implementation as parameter, for example: { Promise: require('bluebird') }\"\n    );\n  }\n\n  return new PromisePool(corePool, thePromise);\n}\n\n(function (functionsToWrap) {\n  for (let i = 0; functionsToWrap && i < functionsToWrap.length; i++) {\n    const func = functionsToWrap[i];\n\n    if (\n      typeof core.Pool.prototype[func] === 'function' &&\n      PromisePool.prototype[func] === undefined\n    ) {\n      PromisePool.prototype[func] = (function factory(funcName) {\n        return function () {\n          return core.Pool.prototype[funcName].apply(this.pool, arguments);\n        };\n      })(func);\n    }\n  }\n})([\n  // synchronous functions\n  'escape',\n  'escapeId',\n  'format'\n]);\n\nclass PromisePoolCluster extends EventEmitter {\n  constructor(poolCluster, thePromise) {\n    super();\n    this.poolCluster = poolCluster;\n    this.Promise = thePromise || Promise;\n    inheritEvents(poolCluster, this, ['acquire', 'connection', 'enqueue', 'release']);\n  }\n\n  getConnection() {\n    const corePoolCluster = this.poolCluster;\n    return new this.Promise((resolve, reject) => {\n      corePoolCluster.getConnection((err, coreConnection) => {\n        if (err) {\n          reject(err);\n        } else {\n          resolve(new PromisePoolConnection(coreConnection, this.Promise));\n        }\n      });\n    });\n  }\n\n  query(sql, args) {\n    const corePoolCluster = this.poolCluster;\n    const localErr = new Error();\n    if (typeof args === 'function') {\n      throw new Error(\n        'Callback function is not available with promise clients.'\n      );\n    }\n    return new this.Promise((resolve, reject) => {\n      const done = makeDoneCb(resolve, reject, localErr);\n      corePoolCluster.query(sql, args, done);\n    });\n  }\n\n  execute(sql, args) {\n    const corePoolCluster = this.poolCluster;\n    const localErr = new Error();\n    if (typeof args === 'function') {\n      throw new Error(\n        'Callback function is not available with promise clients.'\n      );\n    }\n    return new this.Promise((resolve, reject) => {\n      const done = makeDoneCb(resolve, reject, localErr);\n      corePoolCluster.execute(sql, args, done);\n    });\n  }\n\n  of(pattern, selector) {\n    return new PromisePoolCluster(\n      this.poolCluster.of(pattern, selector),\n      this.Promise\n    );\n  }\n\n  end() {\n    const corePoolCluster = this.poolCluster;\n    const localErr = new Error();\n    return new this.Promise((resolve, reject) => {\n      corePoolCluster.end(err => {\n        if (err) {\n          localErr.message = err.message;\n          localErr.code = err.code;\n          localErr.errno = err.errno;\n          localErr.sqlState = err.sqlState;\n          localErr.sqlMessage = err.sqlMessage;\n          reject(localErr);\n        } else {\n          resolve();\n        }\n      });\n    });\n  }\n}\n\n/**\n * proxy poolCluster synchronous functions\n */\n(function (functionsToWrap) {\n  for (let i = 0; functionsToWrap && i < functionsToWrap.length; i++) {\n    const func = functionsToWrap[i];\n\n    if (\n      typeof core.PoolCluster.prototype[func] === 'function' &&\n      PromisePoolCluster.prototype[func] === undefined\n    ) {\n      PromisePoolCluster.prototype[func] = (function factory(funcName) {\n        return function () {\n          return core.PoolCluster.prototype[funcName].apply(this.poolCluster, arguments);\n        };\n      })(func);\n    }\n  }\n})([\n  'add'\n]);\n\nfunction createPoolCluster(opts) {\n  const corePoolCluster = core.createPoolCluster(opts);\n  const thePromise = (opts && opts.Promise) || Promise;\n  if (!thePromise) {\n    throw new Error(\n      'no Promise implementation available.' +\n      'Use promise-enabled node version or pass userland Promise' +\n      \" implementation as parameter, for example: { Promise: require('bluebird') }\"\n    );\n  }\n  return new PromisePoolCluster(corePoolCluster, thePromise);\n}\n\nexports.createConnection = createConnection;\nexports.createPool = createPool;\nexports.createPoolCluster = createPoolCluster;\nexports.escape = core.escape;\nexports.escapeId = core.escapeId;\nexports.format = core.format;\nexports.raw = core.raw;\nexports.PromisePool = PromisePool;\nexports.PromiseConnection = PromiseConnection;\nexports.PromisePoolConnection = PromisePoolConnection;\n"],"mappings":"AAAA;;AAEA,MAAMA,IAAI,GAAGC,OAAO,CAAC,YAAD,CAApB;;AACA,MAAMC,YAAY,GAAGD,OAAO,CAAC,QAAD,CAAP,CAAkBC,YAAvC;;AAEA,SAASC,UAAT,CAAoBC,OAApB,EAA6BC,MAA7B,EAAqCC,QAArC,EAA+C;EAC7C,OAAO,UAAUC,GAAV,EAAeC,IAAf,EAAqBC,MAArB,EAA6B;IAClC,IAAIF,GAAJ,EAAS;MACPD,QAAQ,CAACI,OAAT,GAAmBH,GAAG,CAACG,OAAvB;MACAJ,QAAQ,CAACK,IAAT,GAAgBJ,GAAG,CAACI,IAApB;MACAL,QAAQ,CAACM,KAAT,GAAiBL,GAAG,CAACK,KAArB;MACAN,QAAQ,CAACO,GAAT,GAAeN,GAAG,CAACM,GAAnB;MACAP,QAAQ,CAACQ,QAAT,GAAoBP,GAAG,CAACO,QAAxB;MACAR,QAAQ,CAACS,UAAT,GAAsBR,GAAG,CAACQ,UAA1B;MACAV,MAAM,CAACC,QAAD,CAAN;IACD,CARD,MAQO;MACLF,OAAO,CAAC,CAACI,IAAD,EAAOC,MAAP,CAAD,CAAP;IACD;EACF,CAZD;AAaD;;AAED,SAASO,aAAT,CAAuBC,MAAvB,EAA+BC,MAA/B,EAAuCC,MAAvC,EAA+C;EAC7C,MAAMC,SAAS,GAAG,EAAlB;EACAF,MAAM,CACHG,EADH,CACM,aADN,EACqBC,SAAS,IAAI;IAC9B,IAAIH,MAAM,CAACI,OAAP,CAAeD,SAAf,KAA6B,CAA7B,IAAkC,CAACJ,MAAM,CAACM,aAAP,CAAqBF,SAArB,CAAvC,EAAwE;MACtEL,MAAM,CAACI,EAAP,CACEC,SADF,EAEGF,SAAS,CAACE,SAAD,CAAT,GAAuB,YAAY;QAClC,MAAMG,IAAI,GAAG,GAAGC,KAAH,CAASC,IAAT,CAAcC,SAAd,CAAb;QACAH,IAAI,CAACI,OAAL,CAAaP,SAAb;QAEAJ,MAAM,CAACY,IAAP,CAAYC,KAAZ,CAAkBb,MAAlB,EAA0BO,IAA1B;MACD,CAPH;IASD;EACF,CAbH,EAcGJ,EAdH,CAcM,gBAdN,EAcwBC,SAAS,IAAI;IACjC,IAAIH,MAAM,CAACI,OAAP,CAAeD,SAAf,KAA6B,CAA7B,IAAkC,CAACJ,MAAM,CAACM,aAAP,CAAqBF,SAArB,CAAvC,EAAwE;MACtEL,MAAM,CAACe,cAAP,CAAsBV,SAAtB,EAAiCF,SAAS,CAACE,SAAD,CAA1C;MACA,OAAOF,SAAS,CAACE,SAAD,CAAhB;IACD;EACF,CAnBH;AAoBD;;AAED,MAAMW,4BAAN,CAAmC;EACjCC,WAAW,CAACC,SAAD,EAAYC,WAAZ,EAAyB;IAClC,KAAKD,SAAL,GAAiBA,SAAjB;IACA,KAAKE,OAAL,GAAeD,WAAf;EACD;;EAEDE,OAAO,CAACC,UAAD,EAAa;IAClB,MAAMC,CAAC,GAAG,KAAKL,SAAf;IACA,MAAM7B,QAAQ,GAAG,IAAImC,KAAJ,EAAjB;IACA,OAAO,IAAI,KAAKJ,OAAT,CAAiB,CAACjC,OAAD,EAAUC,MAAV,KAAqB;MAC3C,MAAMqC,IAAI,GAAGvC,UAAU,CAACC,OAAD,EAAUC,MAAV,EAAkBC,QAAlB,CAAvB;;MACA,IAAIiC,UAAJ,EAAgB;QACdC,CAAC,CAACF,OAAF,CAAUC,UAAV,EAAsBG,IAAtB;MACD,CAFD,MAEO;QACLF,CAAC,CAACF,OAAF,CAAUI,IAAV;MACD;IACF,CAPM,CAAP;EAQD;;EAEDC,KAAK,GAAG;IACN,OAAO,IAAI,KAAKN,OAAT,CAAiBjC,OAAO,IAAI;MACjC,KAAK+B,SAAL,CAAeQ,KAAf;MACAvC,OAAO;IACR,CAHM,CAAP;EAID;;AAxBgC;;AA2BnC,MAAMwC,iBAAN,SAAgC1C,YAAhC,CAA6C;EAC3CgC,WAAW,CAACW,UAAD,EAAaT,WAAb,EAA0B;IACnC;IACA,KAAKS,UAAL,GAAkBA,UAAlB;IACA,KAAKR,OAAL,GAAeD,WAAW,IAAIC,OAA9B;IACArB,aAAa,CAAC6B,UAAD,EAAa,IAAb,EAAmB,CAC9B,OAD8B,EAE9B,OAF8B,EAG9B,SAH8B,EAI9B,KAJ8B,EAK9B,SAL8B,CAAnB,CAAb;EAOD;;EAEDC,OAAO,GAAG;IACR,KAAKD,UAAL,CAAgBC,OAAhB;EACD;;EAEDC,KAAK,CAACA,KAAD,EAAQC,MAAR,EAAgB;IACnB,MAAMC,CAAC,GAAG,KAAKJ,UAAf;IACA,MAAMvC,QAAQ,GAAG,IAAImC,KAAJ,EAAjB;;IACA,IAAI,OAAOO,MAAP,KAAkB,UAAtB,EAAkC;MAChC,MAAM,IAAIP,KAAJ,CACJ,0DADI,CAAN;IAGD;;IACD,OAAO,IAAI,KAAKJ,OAAT,CAAiB,CAACjC,OAAD,EAAUC,MAAV,KAAqB;MAC3C,MAAMqC,IAAI,GAAGvC,UAAU,CAACC,OAAD,EAAUC,MAAV,EAAkBC,QAAlB,CAAvB;;MACA,IAAI0C,MAAM,KAAKE,SAAf,EAA0B;QACxBD,CAAC,CAACF,KAAF,CAAQA,KAAR,EAAeC,MAAf,EAAuBN,IAAvB;MACD,CAFD,MAEO;QACLO,CAAC,CAACF,KAAF,CAAQA,KAAR,EAAeL,IAAf;MACD;IACF,CAPM,CAAP;EAQD;;EAEDJ,OAAO,CAACS,KAAD,EAAQC,MAAR,EAAgB;IACrB,MAAMC,CAAC,GAAG,KAAKJ,UAAf;IACA,MAAMvC,QAAQ,GAAG,IAAImC,KAAJ,EAAjB;;IACA,IAAI,OAAOO,MAAP,KAAkB,UAAtB,EAAkC;MAChC,MAAM,IAAIP,KAAJ,CACJ,0DADI,CAAN;IAGD;;IACD,OAAO,IAAI,KAAKJ,OAAT,CAAiB,CAACjC,OAAD,EAAUC,MAAV,KAAqB;MAC3C,MAAMqC,IAAI,GAAGvC,UAAU,CAACC,OAAD,EAAUC,MAAV,EAAkBC,QAAlB,CAAvB;;MACA,IAAI0C,MAAM,KAAKE,SAAf,EAA0B;QACxBD,CAAC,CAACX,OAAF,CAAUS,KAAV,EAAiBC,MAAjB,EAAyBN,IAAzB;MACD,CAFD,MAEO;QACLO,CAAC,CAACX,OAAF,CAAUS,KAAV,EAAiBL,IAAjB;MACD;IACF,CAPM,CAAP;EAQD;;EAEDS,GAAG,GAAG;IACJ,OAAO,IAAI,KAAKd,OAAT,CAAiBjC,OAAO,IAAI;MACjC,KAAKyC,UAAL,CAAgBM,GAAhB,CAAoB/C,OAApB;IACD,CAFM,CAAP;EAGD;;EAEDgD,gBAAgB,GAAG;IACjB,MAAMH,CAAC,GAAG,KAAKJ,UAAf;IACA,MAAMvC,QAAQ,GAAG,IAAImC,KAAJ,EAAjB;IACA,OAAO,IAAI,KAAKJ,OAAT,CAAiB,CAACjC,OAAD,EAAUC,MAAV,KAAqB;MAC3C,MAAMqC,IAAI,GAAGvC,UAAU,CAACC,OAAD,EAAUC,MAAV,EAAkBC,QAAlB,CAAvB;MACA2C,CAAC,CAACG,gBAAF,CAAmBV,IAAnB;IACD,CAHM,CAAP;EAID;;EAEDW,MAAM,GAAG;IACP,MAAMJ,CAAC,GAAG,KAAKJ,UAAf;IACA,MAAMvC,QAAQ,GAAG,IAAImC,KAAJ,EAAjB;IACA,OAAO,IAAI,KAAKJ,OAAT,CAAiB,CAACjC,OAAD,EAAUC,MAAV,KAAqB;MAC3C,MAAMqC,IAAI,GAAGvC,UAAU,CAACC,OAAD,EAAUC,MAAV,EAAkBC,QAAlB,CAAvB;MACA2C,CAAC,CAACI,MAAF,CAASX,IAAT;IACD,CAHM,CAAP;EAID;;EAEDY,QAAQ,GAAG;IACT,MAAML,CAAC,GAAG,KAAKJ,UAAf;IACA,MAAMvC,QAAQ,GAAG,IAAImC,KAAJ,EAAjB;IACA,OAAO,IAAI,KAAKJ,OAAT,CAAiB,CAACjC,OAAD,EAAUC,MAAV,KAAqB;MAC3C,MAAMqC,IAAI,GAAGvC,UAAU,CAACC,OAAD,EAAUC,MAAV,EAAkBC,QAAlB,CAAvB;MACA2C,CAAC,CAACK,QAAF,CAAWZ,IAAX;IACD,CAHM,CAAP;EAID;;EAEDa,IAAI,GAAG;IACL,MAAMN,CAAC,GAAG,KAAKJ,UAAf;IACA,MAAMvC,QAAQ,GAAG,IAAImC,KAAJ,EAAjB;IACA,OAAO,IAAI,KAAKJ,OAAT,CAAiB,CAACjC,OAAD,EAAUC,MAAV,KAAqB;MAC3C,MAAMqC,IAAI,GAAGvC,UAAU,CAACC,OAAD,EAAUC,MAAV,EAAkBC,QAAlB,CAAvB;MACA2C,CAAC,CAACM,IAAF,CAAOb,IAAP;IACD,CAHM,CAAP;EAID;;EAEDc,OAAO,GAAG;IACR,MAAMP,CAAC,GAAG,KAAKJ,UAAf;IACA,MAAMvC,QAAQ,GAAG,IAAImC,KAAJ,EAAjB;IACA,OAAO,IAAI,KAAKJ,OAAT,CAAiB,CAACjC,OAAD,EAAUC,MAAV,KAAqB;MAC3C4C,CAAC,CAACO,OAAF,CAAU,CAACjD,GAAD,EAAMkD,KAAN,KAAgB;QACxB,IAAIlD,GAAJ,EAAS;UACPD,QAAQ,CAACI,OAAT,GAAmBH,GAAG,CAACG,OAAvB;UACAJ,QAAQ,CAACK,IAAT,GAAgBJ,GAAG,CAACI,IAApB;UACAL,QAAQ,CAACM,KAAT,GAAiBL,GAAG,CAACK,KAArB;UACAN,QAAQ,CAACQ,QAAT,GAAoBP,GAAG,CAACO,QAAxB;UACAR,QAAQ,CAACS,UAAT,GAAsBR,GAAG,CAACQ,UAA1B;UACAV,MAAM,CAACC,QAAD,CAAN;QACD,CAPD,MAOO;UACLF,OAAO,CAACqD,KAAD,CAAP;QACD;MACF,CAXD;IAYD,CAbM,CAAP;EAcD;;EAEDC,OAAO,CAACC,OAAD,EAAU;IACf,MAAMV,CAAC,GAAG,KAAKJ,UAAf;IACA,MAAMT,WAAW,GAAG,KAAKC,OAAzB;IACA,MAAM/B,QAAQ,GAAG,IAAImC,KAAJ,EAAjB;IACA,OAAO,IAAI,KAAKJ,OAAT,CAAiB,CAACjC,OAAD,EAAUC,MAAV,KAAqB;MAC3C4C,CAAC,CAACS,OAAF,CAAUC,OAAV,EAAmB,CAACpD,GAAD,EAAM4B,SAAN,KAAoB;QACrC,IAAI5B,GAAJ,EAAS;UACPD,QAAQ,CAACI,OAAT,GAAmBH,GAAG,CAACG,OAAvB;UACAJ,QAAQ,CAACK,IAAT,GAAgBJ,GAAG,CAACI,IAApB;UACAL,QAAQ,CAACM,KAAT,GAAiBL,GAAG,CAACK,KAArB;UACAN,QAAQ,CAACQ,QAAT,GAAoBP,GAAG,CAACO,QAAxB;UACAR,QAAQ,CAACS,UAAT,GAAsBR,GAAG,CAACQ,UAA1B;UACAV,MAAM,CAACC,QAAD,CAAN;QACD,CAPD,MAOO;UACL,MAAMsD,gBAAgB,GAAG,IAAI3B,4BAAJ,CACvBE,SADuB,EAEvBC,WAFuB,CAAzB;UAIAhC,OAAO,CAACwD,gBAAD,CAAP;QACD;MACF,CAfD;IAgBD,CAjBM,CAAP;EAkBD;;EAEDC,UAAU,CAACF,OAAD,EAAU;IAClB,MAAMV,CAAC,GAAG,KAAKJ,UAAf;IACA,MAAMvC,QAAQ,GAAG,IAAImC,KAAJ,EAAjB;IACA,OAAO,IAAI,KAAKJ,OAAT,CAAiB,CAACjC,OAAD,EAAUC,MAAV,KAAqB;MAC3C4C,CAAC,CAACY,UAAF,CAAaF,OAAb,EAAsBpD,GAAG,IAAI;QAC3B,IAAIA,GAAJ,EAAS;UACPD,QAAQ,CAACI,OAAT,GAAmBH,GAAG,CAACG,OAAvB;UACAJ,QAAQ,CAACK,IAAT,GAAgBJ,GAAG,CAACI,IAApB;UACAL,QAAQ,CAACM,KAAT,GAAiBL,GAAG,CAACK,KAArB;UACAN,QAAQ,CAACQ,QAAT,GAAoBP,GAAG,CAACO,QAAxB;UACAR,QAAQ,CAACS,UAAT,GAAsBR,GAAG,CAACQ,UAA1B;UACAV,MAAM,CAACC,QAAD,CAAN;QACD,CAPD,MAOO;UACLF,OAAO;QACR;MACF,CAXD;IAYD,CAbM,CAAP;EAcD;;EAES,IAAN0D,MAAM,GAAG;IACX,OAAO,KAAKjB,UAAL,CAAgBiB,MAAvB;EACD;;EAEW,IAARC,QAAQ,GAAG;IACb,OAAO,KAAKlB,UAAL,CAAgBkB,QAAvB;EACD;;AApK0C;;AAuK7C,SAASC,gBAAT,CAA0BC,IAA1B,EAAgC;EAC9B,MAAMC,cAAc,GAAGlE,IAAI,CAACgE,gBAAL,CAAsBC,IAAtB,CAAvB;EACA,MAAME,mBAAmB,GAAG,IAAI1B,KAAJ,EAA5B;EACA,MAAM2B,UAAU,GAAGH,IAAI,CAAC5B,OAAL,IAAgBA,OAAnC;;EACA,IAAI,CAAC+B,UAAL,EAAiB;IACf,MAAM,IAAI3B,KAAJ,CACJ,yCACA,2DADA,GAEA,6EAHI,CAAN;EAKD;;EACD,OAAO,IAAI2B,UAAJ,CAAe,CAAChE,OAAD,EAAUC,MAAV,KAAqB;IACzC6D,cAAc,CAACG,IAAf,CAAoB,SAApB,EAA+B,MAAM;MACnCjE,OAAO,CAAC,IAAIwC,iBAAJ,CAAsBsB,cAAtB,EAAsCE,UAAtC,CAAD,CAAP;IACD,CAFD;IAGAF,cAAc,CAACG,IAAf,CAAoB,OAApB,EAA6B9D,GAAG,IAAI;MAClC4D,mBAAmB,CAACzD,OAApB,GAA8BH,GAAG,CAACG,OAAlC;MACAyD,mBAAmB,CAACxD,IAApB,GAA2BJ,GAAG,CAACI,IAA/B;MACAwD,mBAAmB,CAACvD,KAApB,GAA4BL,GAAG,CAACK,KAAhC;MACAuD,mBAAmB,CAACrD,QAApB,GAA+BP,GAAG,CAACO,QAAnC;MACAT,MAAM,CAAC8D,mBAAD,CAAN;IACD,CAND;EAOD,CAXM,CAAP;AAYD,C,CAED;AACA;AAEA;AACA;AACA;AAEA;;;AACA,CAAC,UAAUG,eAAV,EAA2B;EAC1B,KAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBD,eAAe,IAAIC,CAAC,GAAGD,eAAe,CAACE,MAAvD,EAA+DD,CAAC,EAAhE,EAAoE;IAClE,MAAME,IAAI,GAAGH,eAAe,CAACC,CAAD,CAA5B;;IAEA,IACE,OAAOvE,IAAI,CAAC0E,UAAL,CAAgBC,SAAhB,CAA0BF,IAA1B,CAAP,KAA2C,UAA3C,IACA7B,iBAAiB,CAAC+B,SAAlB,CAA4BF,IAA5B,MAAsCvB,SAFxC,EAGE;MACAN,iBAAiB,CAAC+B,SAAlB,CAA4BF,IAA5B,IAAqC,SAASG,OAAT,CAAiBC,QAAjB,EAA2B;QAC9D,OAAO,YAAY;UACjB,OAAO7E,IAAI,CAAC0E,UAAL,CAAgBC,SAAhB,CAA0BE,QAA1B,EAAoC9C,KAApC,CACL,KAAKc,UADA,EAELjB,SAFK,CAAP;QAID,CALD;MAMD,CAPmC,CAOjC6C,IAPiC,CAApC;IAQD;EACF;AACF,CAlBD,EAkBG,CACD;AACA,OAFC,EAGD,oBAHC,EAID,SAJC,EAKD,QALC,EAMD,UANC,EAOD,QAPC,EAQD,OARC,EASD,MATC,EAUD,QAVC,EAWD,WAXC,CAlBH;;AAgCA,MAAMK,qBAAN,SAAoClC,iBAApC,CAAsD;EACpDV,WAAW,CAACW,UAAD,EAAaT,WAAb,EAA0B;IACnC,MAAMS,UAAN,EAAkBT,WAAlB;EACD;;EAED2C,OAAO,GAAG;IACR,OAAO/E,IAAI,CAACgF,cAAL,CAAoBL,SAApB,CAA8BI,OAA9B,CAAsChD,KAAtC,CACL,KAAKc,UADA,EAELjB,SAFK,CAAP;EAID;;AAVmD;;AAatD,MAAMqD,WAAN,SAA0B/E,YAA1B,CAAuC;EACrCgC,WAAW,CAACgD,IAAD,EAAOd,UAAP,EAAmB;IAC5B;IACA,KAAKc,IAAL,GAAYA,IAAZ;IACA,KAAK7C,OAAL,GAAe+B,UAAU,IAAI/B,OAA7B;IACArB,aAAa,CAACkE,IAAD,EAAO,IAAP,EAAa,CAAC,SAAD,EAAY,YAAZ,EAA0B,SAA1B,EAAqC,SAArC,CAAb,CAAb;EACD;;EAEDC,aAAa,GAAG;IACd,MAAMC,QAAQ,GAAG,KAAKF,IAAtB;IACA,OAAO,IAAI,KAAK7C,OAAT,CAAiB,CAACjC,OAAD,EAAUC,MAAV,KAAqB;MAC3C+E,QAAQ,CAACD,aAAT,CAAuB,CAAC5E,GAAD,EAAM2D,cAAN,KAAyB;QAC9C,IAAI3D,GAAJ,EAAS;UACPF,MAAM,CAACE,GAAD,CAAN;QACD,CAFD,MAEO;UACLH,OAAO,CAAC,IAAI0E,qBAAJ,CAA0BZ,cAA1B,EAA0C,KAAK7B,OAA/C,CAAD,CAAP;QACD;MACF,CAND;IAOD,CARM,CAAP;EASD;;EAEDU,KAAK,CAAClC,GAAD,EAAMY,IAAN,EAAY;IACf,MAAM2D,QAAQ,GAAG,KAAKF,IAAtB;IACA,MAAM5E,QAAQ,GAAG,IAAImC,KAAJ,EAAjB;;IACA,IAAI,OAAOhB,IAAP,KAAgB,UAApB,EAAgC;MAC9B,MAAM,IAAIgB,KAAJ,CACJ,0DADI,CAAN;IAGD;;IACD,OAAO,IAAI,KAAKJ,OAAT,CAAiB,CAACjC,OAAD,EAAUC,MAAV,KAAqB;MAC3C,MAAMqC,IAAI,GAAGvC,UAAU,CAACC,OAAD,EAAUC,MAAV,EAAkBC,QAAlB,CAAvB;;MACA,IAAImB,IAAI,KAAKyB,SAAb,EAAwB;QACtBkC,QAAQ,CAACrC,KAAT,CAAelC,GAAf,EAAoBY,IAApB,EAA0BiB,IAA1B;MACD,CAFD,MAEO;QACL0C,QAAQ,CAACrC,KAAT,CAAelC,GAAf,EAAoB6B,IAApB;MACD;IACF,CAPM,CAAP;EAQD;;EAEDJ,OAAO,CAACzB,GAAD,EAAMY,IAAN,EAAY;IACjB,MAAM2D,QAAQ,GAAG,KAAKF,IAAtB;IACA,MAAM5E,QAAQ,GAAG,IAAImC,KAAJ,EAAjB;;IACA,IAAI,OAAOhB,IAAP,KAAgB,UAApB,EAAgC;MAC9B,MAAM,IAAIgB,KAAJ,CACJ,0DADI,CAAN;IAGD;;IACD,OAAO,IAAI,KAAKJ,OAAT,CAAiB,CAACjC,OAAD,EAAUC,MAAV,KAAqB;MAC3C,MAAMqC,IAAI,GAAGvC,UAAU,CAACC,OAAD,EAAUC,MAAV,EAAkBC,QAAlB,CAAvB;;MACA,IAAImB,IAAJ,EAAU;QACR2D,QAAQ,CAAC9C,OAAT,CAAiBzB,GAAjB,EAAsBY,IAAtB,EAA4BiB,IAA5B;MACD,CAFD,MAEO;QACL0C,QAAQ,CAAC9C,OAAT,CAAiBzB,GAAjB,EAAsB6B,IAAtB;MACD;IACF,CAPM,CAAP;EAQD;;EAEDS,GAAG,GAAG;IACJ,MAAMiC,QAAQ,GAAG,KAAKF,IAAtB;IACA,MAAM5E,QAAQ,GAAG,IAAImC,KAAJ,EAAjB;IACA,OAAO,IAAI,KAAKJ,OAAT,CAAiB,CAACjC,OAAD,EAAUC,MAAV,KAAqB;MAC3C+E,QAAQ,CAACjC,GAAT,CAAa5C,GAAG,IAAI;QAClB,IAAIA,GAAJ,EAAS;UACPD,QAAQ,CAACI,OAAT,GAAmBH,GAAG,CAACG,OAAvB;UACAJ,QAAQ,CAACK,IAAT,GAAgBJ,GAAG,CAACI,IAApB;UACAL,QAAQ,CAACM,KAAT,GAAiBL,GAAG,CAACK,KAArB;UACAN,QAAQ,CAACQ,QAAT,GAAoBP,GAAG,CAACO,QAAxB;UACAR,QAAQ,CAACS,UAAT,GAAsBR,GAAG,CAACQ,UAA1B;UACAV,MAAM,CAACC,QAAD,CAAN;QACD,CAPD,MAOO;UACLF,OAAO;QACR;MACF,CAXD;IAYD,CAbM,CAAP;EAcD;;AA1EoC;;AA6EvC,SAASiF,UAAT,CAAoBpB,IAApB,EAA0B;EACxB,MAAMmB,QAAQ,GAAGpF,IAAI,CAACqF,UAAL,CAAgBpB,IAAhB,CAAjB;EACA,MAAMG,UAAU,GAAGH,IAAI,CAAC5B,OAAL,IAAgBA,OAAnC;;EACA,IAAI,CAAC+B,UAAL,EAAiB;IACf,MAAM,IAAI3B,KAAJ,CACJ,yCACA,2DADA,GAEA,6EAHI,CAAN;EAKD;;EAED,OAAO,IAAIwC,WAAJ,CAAgBG,QAAhB,EAA0BhB,UAA1B,CAAP;AACD;;AAED,CAAC,UAAUE,eAAV,EAA2B;EAC1B,KAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBD,eAAe,IAAIC,CAAC,GAAGD,eAAe,CAACE,MAAvD,EAA+DD,CAAC,EAAhE,EAAoE;IAClE,MAAME,IAAI,GAAGH,eAAe,CAACC,CAAD,CAA5B;;IAEA,IACE,OAAOvE,IAAI,CAACsF,IAAL,CAAUX,SAAV,CAAoBF,IAApB,CAAP,KAAqC,UAArC,IACAQ,WAAW,CAACN,SAAZ,CAAsBF,IAAtB,MAAgCvB,SAFlC,EAGE;MACA+B,WAAW,CAACN,SAAZ,CAAsBF,IAAtB,IAA+B,SAASG,OAAT,CAAiBC,QAAjB,EAA2B;QACxD,OAAO,YAAY;UACjB,OAAO7E,IAAI,CAACsF,IAAL,CAAUX,SAAV,CAAoBE,QAApB,EAA8B9C,KAA9B,CAAoC,KAAKmD,IAAzC,EAA+CtD,SAA/C,CAAP;QACD,CAFD;MAGD,CAJ6B,CAI3B6C,IAJ2B,CAA9B;IAKD;EACF;AACF,CAfD,EAeG,CACD;AACA,QAFC,EAGD,UAHC,EAID,QAJC,CAfH;;AAsBA,MAAMc,kBAAN,SAAiCrF,YAAjC,CAA8C;EAC5CgC,WAAW,CAACsD,WAAD,EAAcpB,UAAd,EAA0B;IACnC;IACA,KAAKoB,WAAL,GAAmBA,WAAnB;IACA,KAAKnD,OAAL,GAAe+B,UAAU,IAAI/B,OAA7B;IACArB,aAAa,CAACwE,WAAD,EAAc,IAAd,EAAoB,CAAC,SAAD,EAAY,YAAZ,EAA0B,SAA1B,EAAqC,SAArC,CAApB,CAAb;EACD;;EAEDL,aAAa,GAAG;IACd,MAAMM,eAAe,GAAG,KAAKD,WAA7B;IACA,OAAO,IAAI,KAAKnD,OAAT,CAAiB,CAACjC,OAAD,EAAUC,MAAV,KAAqB;MAC3CoF,eAAe,CAACN,aAAhB,CAA8B,CAAC5E,GAAD,EAAM2D,cAAN,KAAyB;QACrD,IAAI3D,GAAJ,EAAS;UACPF,MAAM,CAACE,GAAD,CAAN;QACD,CAFD,MAEO;UACLH,OAAO,CAAC,IAAI0E,qBAAJ,CAA0BZ,cAA1B,EAA0C,KAAK7B,OAA/C,CAAD,CAAP;QACD;MACF,CAND;IAOD,CARM,CAAP;EASD;;EAEDU,KAAK,CAAClC,GAAD,EAAMY,IAAN,EAAY;IACf,MAAMgE,eAAe,GAAG,KAAKD,WAA7B;IACA,MAAMlF,QAAQ,GAAG,IAAImC,KAAJ,EAAjB;;IACA,IAAI,OAAOhB,IAAP,KAAgB,UAApB,EAAgC;MAC9B,MAAM,IAAIgB,KAAJ,CACJ,0DADI,CAAN;IAGD;;IACD,OAAO,IAAI,KAAKJ,OAAT,CAAiB,CAACjC,OAAD,EAAUC,MAAV,KAAqB;MAC3C,MAAMqC,IAAI,GAAGvC,UAAU,CAACC,OAAD,EAAUC,MAAV,EAAkBC,QAAlB,CAAvB;MACAmF,eAAe,CAAC1C,KAAhB,CAAsBlC,GAAtB,EAA2BY,IAA3B,EAAiCiB,IAAjC;IACD,CAHM,CAAP;EAID;;EAEDJ,OAAO,CAACzB,GAAD,EAAMY,IAAN,EAAY;IACjB,MAAMgE,eAAe,GAAG,KAAKD,WAA7B;IACA,MAAMlF,QAAQ,GAAG,IAAImC,KAAJ,EAAjB;;IACA,IAAI,OAAOhB,IAAP,KAAgB,UAApB,EAAgC;MAC9B,MAAM,IAAIgB,KAAJ,CACJ,0DADI,CAAN;IAGD;;IACD,OAAO,IAAI,KAAKJ,OAAT,CAAiB,CAACjC,OAAD,EAAUC,MAAV,KAAqB;MAC3C,MAAMqC,IAAI,GAAGvC,UAAU,CAACC,OAAD,EAAUC,MAAV,EAAkBC,QAAlB,CAAvB;MACAmF,eAAe,CAACnD,OAAhB,CAAwBzB,GAAxB,EAA6BY,IAA7B,EAAmCiB,IAAnC;IACD,CAHM,CAAP;EAID;;EAEDgD,EAAE,CAACC,OAAD,EAAUC,QAAV,EAAoB;IACpB,OAAO,IAAIL,kBAAJ,CACL,KAAKC,WAAL,CAAiBE,EAAjB,CAAoBC,OAApB,EAA6BC,QAA7B,CADK,EAEL,KAAKvD,OAFA,CAAP;EAID;;EAEDc,GAAG,GAAG;IACJ,MAAMsC,eAAe,GAAG,KAAKD,WAA7B;IACA,MAAMlF,QAAQ,GAAG,IAAImC,KAAJ,EAAjB;IACA,OAAO,IAAI,KAAKJ,OAAT,CAAiB,CAACjC,OAAD,EAAUC,MAAV,KAAqB;MAC3CoF,eAAe,CAACtC,GAAhB,CAAoB5C,GAAG,IAAI;QACzB,IAAIA,GAAJ,EAAS;UACPD,QAAQ,CAACI,OAAT,GAAmBH,GAAG,CAACG,OAAvB;UACAJ,QAAQ,CAACK,IAAT,GAAgBJ,GAAG,CAACI,IAApB;UACAL,QAAQ,CAACM,KAAT,GAAiBL,GAAG,CAACK,KAArB;UACAN,QAAQ,CAACQ,QAAT,GAAoBP,GAAG,CAACO,QAAxB;UACAR,QAAQ,CAACS,UAAT,GAAsBR,GAAG,CAACQ,UAA1B;UACAV,MAAM,CAACC,QAAD,CAAN;QACD,CAPD,MAOO;UACLF,OAAO;QACR;MACF,CAXD;IAYD,CAbM,CAAP;EAcD;;AAzE2C;AA4E9C;AACA;AACA;;;AACA,CAAC,UAAUkE,eAAV,EAA2B;EAC1B,KAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBD,eAAe,IAAIC,CAAC,GAAGD,eAAe,CAACE,MAAvD,EAA+DD,CAAC,EAAhE,EAAoE;IAClE,MAAME,IAAI,GAAGH,eAAe,CAACC,CAAD,CAA5B;;IAEA,IACE,OAAOvE,IAAI,CAAC6F,WAAL,CAAiBlB,SAAjB,CAA2BF,IAA3B,CAAP,KAA4C,UAA5C,IACAc,kBAAkB,CAACZ,SAAnB,CAA6BF,IAA7B,MAAuCvB,SAFzC,EAGE;MACAqC,kBAAkB,CAACZ,SAAnB,CAA6BF,IAA7B,IAAsC,SAASG,OAAT,CAAiBC,QAAjB,EAA2B;QAC/D,OAAO,YAAY;UACjB,OAAO7E,IAAI,CAAC6F,WAAL,CAAiBlB,SAAjB,CAA2BE,QAA3B,EAAqC9C,KAArC,CAA2C,KAAKyD,WAAhD,EAA6D5D,SAA7D,CAAP;QACD,CAFD;MAGD,CAJoC,CAIlC6C,IAJkC,CAArC;IAKD;EACF;AACF,CAfD,EAeG,CACD,KADC,CAfH;;AAmBA,SAASqB,iBAAT,CAA2B7B,IAA3B,EAAiC;EAC/B,MAAMwB,eAAe,GAAGzF,IAAI,CAAC8F,iBAAL,CAAuB7B,IAAvB,CAAxB;EACA,MAAMG,UAAU,GAAIH,IAAI,IAAIA,IAAI,CAAC5B,OAAd,IAA0BA,OAA7C;;EACA,IAAI,CAAC+B,UAAL,EAAiB;IACf,MAAM,IAAI3B,KAAJ,CACJ,yCACA,2DADA,GAEA,6EAHI,CAAN;EAKD;;EACD,OAAO,IAAI8C,kBAAJ,CAAuBE,eAAvB,EAAwCrB,UAAxC,CAAP;AACD;;AAED2B,OAAO,CAAC/B,gBAAR,GAA2BA,gBAA3B;AACA+B,OAAO,CAACV,UAAR,GAAqBA,UAArB;AACAU,OAAO,CAACD,iBAAR,GAA4BA,iBAA5B;AACAC,OAAO,CAACC,MAAR,GAAiBhG,IAAI,CAACgG,MAAtB;AACAD,OAAO,CAACE,QAAR,GAAmBjG,IAAI,CAACiG,QAAxB;AACAF,OAAO,CAACG,MAAR,GAAiBlG,IAAI,CAACkG,MAAtB;AACAH,OAAO,CAACI,GAAR,GAAcnG,IAAI,CAACmG,GAAnB;AACAJ,OAAO,CAACd,WAAR,GAAsBA,WAAtB;AACAc,OAAO,CAACnD,iBAAR,GAA4BA,iBAA5B;AACAmD,OAAO,CAACjB,qBAAR,GAAgCA,qBAAhC"},"metadata":{},"sourceType":"script"}