{"ast":null,"code":"'use strict';\n\nconst Command = require('./command.js');\n\nconst Packets = require('../packets/index.js');\n\nconst ClientHandshake = require('./client_handshake.js');\n\nconst CharsetToEncoding = require('../constants/charset_encodings.js');\n\nclass ChangeUser extends Command {\n  constructor(options, callback) {\n    super();\n    this.onResult = callback;\n    this.user = options.user;\n    this.password = options.password;\n    this.database = options.database;\n    this.passwordSha1 = options.passwordSha1;\n    this.charsetNumber = options.charsetNumber;\n    this.currentConfig = options.currentConfig;\n  }\n\n  start(packet, connection) {\n    const newPacket = new Packets.ChangeUser({\n      flags: connection.config.clientFlags,\n      user: this.user,\n      database: this.database,\n      charsetNumber: this.charsetNumber,\n      password: this.password,\n      passwordSha1: this.passwordSha1,\n      authPluginData1: connection._handshakePacket.authPluginData1,\n      authPluginData2: connection._handshakePacket.authPluginData2\n    });\n    this.currentConfig.user = this.user;\n    this.currentConfig.password = this.password;\n    this.currentConfig.database = this.database;\n    this.currentConfig.charsetNumber = this.charsetNumber;\n    connection.clientEncoding = CharsetToEncoding[this.charsetNumber]; // reset prepared statements cache as all statements become invalid after changeUser\n\n    connection._statements.reset();\n\n    connection.writePacket(newPacket.toPacket());\n    return ChangeUser.prototype.handshakeResult;\n  }\n\n}\n\nChangeUser.prototype.handshakeResult = ClientHandshake.prototype.handshakeResult;\nChangeUser.prototype.calculateNativePasswordAuthToken = ClientHandshake.prototype.calculateNativePasswordAuthToken;\nmodule.exports = ChangeUser;","map":{"version":3,"names":["Command","require","Packets","ClientHandshake","CharsetToEncoding","ChangeUser","constructor","options","callback","onResult","user","password","database","passwordSha1","charsetNumber","currentConfig","start","packet","connection","newPacket","flags","config","clientFlags","authPluginData1","_handshakePacket","authPluginData2","clientEncoding","_statements","reset","writePacket","toPacket","prototype","handshakeResult","calculateNativePasswordAuthToken","module","exports"],"sources":["/home/emilio/√Årea de Trabalho/OneBitCode-aulas/REACT/site-react-login-live/react-controlledForms/node_modules/mysql2/lib/commands/change_user.js"],"sourcesContent":["'use strict';\n\nconst Command = require('./command.js');\nconst Packets = require('../packets/index.js');\nconst ClientHandshake = require('./client_handshake.js');\nconst CharsetToEncoding = require('../constants/charset_encodings.js');\n\nclass ChangeUser extends Command {\n  constructor(options, callback) {\n    super();\n    this.onResult = callback;\n    this.user = options.user;\n    this.password = options.password;\n    this.database = options.database;\n    this.passwordSha1 = options.passwordSha1;\n    this.charsetNumber = options.charsetNumber;\n    this.currentConfig = options.currentConfig;\n  }\n  start(packet, connection) {\n    const newPacket = new Packets.ChangeUser({\n      flags: connection.config.clientFlags,\n      user: this.user,\n      database: this.database,\n      charsetNumber: this.charsetNumber,\n      password: this.password,\n      passwordSha1: this.passwordSha1,\n      authPluginData1: connection._handshakePacket.authPluginData1,\n      authPluginData2: connection._handshakePacket.authPluginData2\n    });\n    this.currentConfig.user = this.user;\n    this.currentConfig.password = this.password;\n    this.currentConfig.database = this.database;\n    this.currentConfig.charsetNumber = this.charsetNumber;\n    connection.clientEncoding = CharsetToEncoding[this.charsetNumber];\n    // reset prepared statements cache as all statements become invalid after changeUser\n    connection._statements.reset();\n    connection.writePacket(newPacket.toPacket());\n    return ChangeUser.prototype.handshakeResult;\n  }\n}\n\nChangeUser.prototype.handshakeResult =\n  ClientHandshake.prototype.handshakeResult;\nChangeUser.prototype.calculateNativePasswordAuthToken =\n  ClientHandshake.prototype.calculateNativePasswordAuthToken;\n\nmodule.exports = ChangeUser;\n"],"mappings":"AAAA;;AAEA,MAAMA,OAAO,GAAGC,OAAO,CAAC,cAAD,CAAvB;;AACA,MAAMC,OAAO,GAAGD,OAAO,CAAC,qBAAD,CAAvB;;AACA,MAAME,eAAe,GAAGF,OAAO,CAAC,uBAAD,CAA/B;;AACA,MAAMG,iBAAiB,GAAGH,OAAO,CAAC,mCAAD,CAAjC;;AAEA,MAAMI,UAAN,SAAyBL,OAAzB,CAAiC;EAC/BM,WAAW,CAACC,OAAD,EAAUC,QAAV,EAAoB;IAC7B;IACA,KAAKC,QAAL,GAAgBD,QAAhB;IACA,KAAKE,IAAL,GAAYH,OAAO,CAACG,IAApB;IACA,KAAKC,QAAL,GAAgBJ,OAAO,CAACI,QAAxB;IACA,KAAKC,QAAL,GAAgBL,OAAO,CAACK,QAAxB;IACA,KAAKC,YAAL,GAAoBN,OAAO,CAACM,YAA5B;IACA,KAAKC,aAAL,GAAqBP,OAAO,CAACO,aAA7B;IACA,KAAKC,aAAL,GAAqBR,OAAO,CAACQ,aAA7B;EACD;;EACDC,KAAK,CAACC,MAAD,EAASC,UAAT,EAAqB;IACxB,MAAMC,SAAS,GAAG,IAAIjB,OAAO,CAACG,UAAZ,CAAuB;MACvCe,KAAK,EAAEF,UAAU,CAACG,MAAX,CAAkBC,WADc;MAEvCZ,IAAI,EAAE,KAAKA,IAF4B;MAGvCE,QAAQ,EAAE,KAAKA,QAHwB;MAIvCE,aAAa,EAAE,KAAKA,aAJmB;MAKvCH,QAAQ,EAAE,KAAKA,QALwB;MAMvCE,YAAY,EAAE,KAAKA,YANoB;MAOvCU,eAAe,EAAEL,UAAU,CAACM,gBAAX,CAA4BD,eAPN;MAQvCE,eAAe,EAAEP,UAAU,CAACM,gBAAX,CAA4BC;IARN,CAAvB,CAAlB;IAUA,KAAKV,aAAL,CAAmBL,IAAnB,GAA0B,KAAKA,IAA/B;IACA,KAAKK,aAAL,CAAmBJ,QAAnB,GAA8B,KAAKA,QAAnC;IACA,KAAKI,aAAL,CAAmBH,QAAnB,GAA8B,KAAKA,QAAnC;IACA,KAAKG,aAAL,CAAmBD,aAAnB,GAAmC,KAAKA,aAAxC;IACAI,UAAU,CAACQ,cAAX,GAA4BtB,iBAAiB,CAAC,KAAKU,aAAN,CAA7C,CAfwB,CAgBxB;;IACAI,UAAU,CAACS,WAAX,CAAuBC,KAAvB;;IACAV,UAAU,CAACW,WAAX,CAAuBV,SAAS,CAACW,QAAV,EAAvB;IACA,OAAOzB,UAAU,CAAC0B,SAAX,CAAqBC,eAA5B;EACD;;AA/B8B;;AAkCjC3B,UAAU,CAAC0B,SAAX,CAAqBC,eAArB,GACE7B,eAAe,CAAC4B,SAAhB,CAA0BC,eAD5B;AAEA3B,UAAU,CAAC0B,SAAX,CAAqBE,gCAArB,GACE9B,eAAe,CAAC4B,SAAhB,CAA0BE,gCAD5B;AAGAC,MAAM,CAACC,OAAP,GAAiB9B,UAAjB"},"metadata":{},"sourceType":"script"}