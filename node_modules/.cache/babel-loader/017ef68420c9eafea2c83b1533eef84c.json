{"ast":null,"code":"'use strict';\n\nconst Packet = require('../packets/packet');\n\nclass TextRow {\n  constructor(columns) {\n    this.columns = columns || [];\n  }\n\n  static fromPacket(packet) {\n    // packet.reset(); // set offset to starting point?\n    const columns = [];\n\n    while (packet.haveMoreData()) {\n      columns.push(packet.readLengthCodedString());\n    }\n\n    return new TextRow(columns);\n  }\n\n  static toPacket(columns, encoding) {\n    const sequenceId = 0; // TODO remove, this is calculated now in connecton\n\n    let length = 0;\n    columns.forEach(val => {\n      if (val === null || typeof val === 'undefined') {\n        ++length;\n        return;\n      }\n\n      length += Packet.lengthCodedStringLength(val.toString(10), encoding);\n    });\n    const buffer = Buffer.allocUnsafe(length + 4);\n    const packet = new Packet(sequenceId, buffer, 0, length + 4);\n    packet.offset = 4;\n    columns.forEach(val => {\n      if (val === null) {\n        packet.writeNull();\n        return;\n      }\n\n      if (typeof val === 'undefined') {\n        packet.writeInt8(0);\n        return;\n      }\n\n      packet.writeLengthCodedString(val.toString(10), encoding);\n    });\n    return packet;\n  }\n\n}\n\nmodule.exports = TextRow;","map":{"version":3,"names":["Packet","require","TextRow","constructor","columns","fromPacket","packet","haveMoreData","push","readLengthCodedString","toPacket","encoding","sequenceId","length","forEach","val","lengthCodedStringLength","toString","buffer","Buffer","allocUnsafe","offset","writeNull","writeInt8","writeLengthCodedString","module","exports"],"sources":["/home/emilio/Área de Trabalho/OneBitCode-aulas/REACT/site-react-login-live/react-controlledForms/node_modules/mysql2/lib/packets/text_row.js"],"sourcesContent":["'use strict';\n\nconst Packet = require('../packets/packet');\n\nclass TextRow {\n  constructor(columns) {\n    this.columns = columns || [];\n  }\n\n  static fromPacket(packet) {\n    // packet.reset(); // set offset to starting point?\n    const columns = [];\n    while (packet.haveMoreData()) {\n      columns.push(packet.readLengthCodedString());\n    }\n    return new TextRow(columns);\n  }\n\n  static toPacket(columns, encoding) {\n    const sequenceId = 0; // TODO remove, this is calculated now in connecton\n    let length = 0;\n    columns.forEach(val => {\n      if (val === null || typeof val === 'undefined') {\n        ++length;\n        return;\n      }\n      length += Packet.lengthCodedStringLength(val.toString(10), encoding);\n    });\n    const buffer = Buffer.allocUnsafe(length + 4);\n    const packet = new Packet(sequenceId, buffer, 0, length + 4);\n    packet.offset = 4;\n    columns.forEach(val => {\n      if (val === null) {\n        packet.writeNull();\n        return;\n      }\n      if (typeof val === 'undefined') {\n        packet.writeInt8(0);\n        return;\n      }\n      packet.writeLengthCodedString(val.toString(10), encoding);\n    });\n    return packet;\n  }\n}\n\nmodule.exports = TextRow;\n"],"mappings":"AAAA;;AAEA,MAAMA,MAAM,GAAGC,OAAO,CAAC,mBAAD,CAAtB;;AAEA,MAAMC,OAAN,CAAc;EACZC,WAAW,CAACC,OAAD,EAAU;IACnB,KAAKA,OAAL,GAAeA,OAAO,IAAI,EAA1B;EACD;;EAEgB,OAAVC,UAAU,CAACC,MAAD,EAAS;IACxB;IACA,MAAMF,OAAO,GAAG,EAAhB;;IACA,OAAOE,MAAM,CAACC,YAAP,EAAP,EAA8B;MAC5BH,OAAO,CAACI,IAAR,CAAaF,MAAM,CAACG,qBAAP,EAAb;IACD;;IACD,OAAO,IAAIP,OAAJ,CAAYE,OAAZ,CAAP;EACD;;EAEc,OAARM,QAAQ,CAACN,OAAD,EAAUO,QAAV,EAAoB;IACjC,MAAMC,UAAU,GAAG,CAAnB,CADiC,CACX;;IACtB,IAAIC,MAAM,GAAG,CAAb;IACAT,OAAO,CAACU,OAAR,CAAgBC,GAAG,IAAI;MACrB,IAAIA,GAAG,KAAK,IAAR,IAAgB,OAAOA,GAAP,KAAe,WAAnC,EAAgD;QAC9C,EAAEF,MAAF;QACA;MACD;;MACDA,MAAM,IAAIb,MAAM,CAACgB,uBAAP,CAA+BD,GAAG,CAACE,QAAJ,CAAa,EAAb,CAA/B,EAAiDN,QAAjD,CAAV;IACD,CAND;IAOA,MAAMO,MAAM,GAAGC,MAAM,CAACC,WAAP,CAAmBP,MAAM,GAAG,CAA5B,CAAf;IACA,MAAMP,MAAM,GAAG,IAAIN,MAAJ,CAAWY,UAAX,EAAuBM,MAAvB,EAA+B,CAA/B,EAAkCL,MAAM,GAAG,CAA3C,CAAf;IACAP,MAAM,CAACe,MAAP,GAAgB,CAAhB;IACAjB,OAAO,CAACU,OAAR,CAAgBC,GAAG,IAAI;MACrB,IAAIA,GAAG,KAAK,IAAZ,EAAkB;QAChBT,MAAM,CAACgB,SAAP;QACA;MACD;;MACD,IAAI,OAAOP,GAAP,KAAe,WAAnB,EAAgC;QAC9BT,MAAM,CAACiB,SAAP,CAAiB,CAAjB;QACA;MACD;;MACDjB,MAAM,CAACkB,sBAAP,CAA8BT,GAAG,CAACE,QAAJ,CAAa,EAAb,CAA9B,EAAgDN,QAAhD;IACD,CAVD;IAWA,OAAOL,MAAP;EACD;;AAvCW;;AA0CdmB,MAAM,CAACC,OAAP,GAAiBxB,OAAjB"},"metadata":{},"sourceType":"script"}